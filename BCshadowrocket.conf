# Best Shadowrocket Rules by Moshel and Johnshall
# MODIFIED BY gitblackcat23
# Build Time: 2025-06-27 07:14:36

[General]
# 默认关闭 ipv6 支持，如果需要请手动开启
ipv6 = false
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, fe80::/10, fc00::/7, localhost, *.local, *.lan, *.internal, e.crashlytics.com, captive.apple.com, sequoia.apple.com, seed-sequoia.siri.apple.com, *.ls.apple.com
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.18.0.0/15,198.51.100.0/24,203.0.113.0/24,233.252.0.0/24,224.0.0.0/4,255.255.255.255/32,::1/128,::ffff:0:0/96,::ffff:0:0:0/96,64:ff9b::/96,64:ff9b:1::/48,100::/64,2001::/32,2001:20::/28,2001:db8::/32,2002::/16,3fff::/20,5f00::/16,fc00::/7,fe80::/10,ff00::/8
dns-server = https://dns.alidns.com/dns-query, https://doh.pub/dns-query

[Rule]
# === 规则由 build.sh 脚本自动生成和填充 ===
# === 请勿在此处手动添加规则，它们将被覆盖 ===


# DIRECT Rules
# NAME: Apple,DIRECT
# AUTHOR: blackmatrix7,DIRECT
# REPO: https://github.com/blackmatrix7/ios_rule_script,DIRECT
# UPDATED: 2025-06-26 02:06:10,DIRECT
# DOMAIN: 10,DIRECT
# DOMAIN-KEYWORD: 7,DIRECT
# DOMAIN-SUFFIX: 1549,DIRECT
# IP-CIDR: 10,DIRECT
# USER-AGENT: 23,DIRECT
# TOTAL: 1599,DIRECT
DOMAIN-KEYWORD,apple-support.akadns.net,DIRECT
DOMAIN-KEYWORD,apple.com.akadns.net,DIRECT
DOMAIN-KEYWORD,apple.com.edgekey.net,DIRECT
DOMAIN-KEYWORD,buy.itunes.apple.com,DIRECT
DOMAIN-KEYWORD,smp-device,DIRECT
DOMAIN-KEYWORD,testflight,DIRECT
DOMAIN-KEYWORD,icloud.com.akadns.net,DIRECT
USER-AGENT,*FindMyiPhone?,DIRECT
USER-AGENT,*Music?,DIRECT
USER-AGENT,*WeatherFoundation*,DIRECT
USER-AGENT,*com.apple.Maps?,DIRECT
USER-AGENT,*com.apple.mobileme.fmip1,DIRECT
USER-AGENT,FMDClient*,DIRECT
USER-AGENT,FMFD*,DIRECT
USER-AGENT,FindMyFriends*,DIRECT
USER-AGENT,FindMyiPhone*,DIRECT
USER-AGENT,Maps*,DIRECT
USER-AGENT,Wallet*,DIRECT
USER-AGENT,com.apple.Maps,DIRECT
USER-AGENT,com.apple.appstored*,DIRECT
USER-AGENT,fmflocatord*,DIRECT
USER-AGENT,geod*,DIRECT
USER-AGENT,locationd*,DIRECT
USER-AGENT,passd*,DIRECT
USER-AGENT,Music*,DIRECT
USER-AGENT,AppleNews*,DIRECT
USER-AGENT,com.apple.news*,DIRECT
USER-AGENT,com.apple.trustd*,DIRECT
USER-AGENT,AppleTV*,DIRECT
USER-AGENT,com.apple.tv*,DIRECT
IP-CIDR,139.178.128.0/18,no-resolve,DIRECT
IP-CIDR,144.178.0.0/19,no-resolve,DIRECT
IP-CIDR,144.178.36.0/22,no-resolve,DIRECT
IP-CIDR,144.178.48.0/20,no-resolve,DIRECT
IP-CIDR,17.0.0.0/8,no-resolve,DIRECT
IP-CIDR,192.35.50.0/24,no-resolve,DIRECT
IP-CIDR,198.183.17.0/24,no-resolve,DIRECT
IP-CIDR,205.180.175.0/24,no-resolve,DIRECT
IP-CIDR,63.92.224.0/19,no-resolve,DIRECT
IP-CIDR,65.199.22.0/23,no-resolve,DIRECT
404: Not Found,DIRECT
# NAME: Lan,DIRECT
# AUTHOR: blackmatrix7,DIRECT
# REPO: https://github.com/blackmatrix7/ios_rule_script,DIRECT
# UPDATED: 2025-06-06 09:17:01,DIRECT
# DOMAIN: 6,DIRECT
# DOMAIN-SUFFIX: 117,DIRECT
# IP-CIDR: 18,DIRECT
# TOTAL: 141,DIRECT
DOMAIN,asusrouter.com,DIRECT
DOMAIN,instant.arubanetworks.com,DIRECT
DOMAIN,oasisauth.h3c.com,DIRECT
DOMAIN,router.asus.com,DIRECT
DOMAIN,setmeup.arubanetworks.com,DIRECT
DOMAIN,www.asusrouter.com,DIRECT
DOMAIN-SUFFIX,0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa,DIRECT
DOMAIN-SUFFIX,0.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa,DIRECT
DOMAIN-SUFFIX,10.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,100.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,100.51.198.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,101.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,102.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,103.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,104.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,105.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,106.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,107.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,108.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,109.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,110.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,111.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,112.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,113.0.203.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,113.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,114.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,115.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,116.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,117.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,118.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,119.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,120.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,121.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,122.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,123.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,124.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,125.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,126.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,127.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,127.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,16.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,168.192.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,17.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,18.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,19.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,2.0.192.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,20.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,21.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,22.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,23.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,24.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,25.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,254.169.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,255.255.255.255.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,26.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,27.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,28.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,29.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,30.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,31.172.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,64.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,65.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,66.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,67.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,68.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,69.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,70.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,71.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,72.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,73.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,74.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,75.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,76.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,77.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,78.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,79.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,8.b.d.0.1.0.0.2.ip6.arpa,DIRECT
DOMAIN-SUFFIX,8.e.f.ip6.arpa,DIRECT
DOMAIN-SUFFIX,80.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,81.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,82.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,83.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,84.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,85.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,86.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,87.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,88.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,89.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,9.e.f.ip6.arpa,DIRECT
DOMAIN-SUFFIX,90.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,91.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,92.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,93.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,94.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,95.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,96.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,97.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,98.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,99.100.in-addr.arpa,DIRECT
DOMAIN-SUFFIX,a.e.f.ip6.arpa,DIRECT
DOMAIN-SUFFIX,acl4.ssr,DIRECT
DOMAIN-SUFFIX,b.e.f.ip6.arpa,DIRECT
DOMAIN-SUFFIX,d.f.ip6.arpa,DIRECT
DOMAIN-SUFFIX,hiwifi.com,DIRECT
DOMAIN-SUFFIX,home.arpa,DIRECT
DOMAIN-SUFFIX,leike.cc,DIRECT
DOMAIN-SUFFIX,localhost.ptlogin2.qq.com,DIRECT
DOMAIN-SUFFIX,localhost.sec.qq.com,DIRECT
DOMAIN-SUFFIX,my.router,DIRECT
DOMAIN-SUFFIX,p.to,DIRECT
DOMAIN-SUFFIX,peiluyou.com,DIRECT
DOMAIN-SUFFIX,phicomm.me,DIRECT
DOMAIN-SUFFIX,plex.direct,DIRECT
DOMAIN-SUFFIX,router.ctc,DIRECT
DOMAIN-SUFFIX,routerlogin.com,DIRECT
DOMAIN-SUFFIX,tendawifi.com,DIRECT
DOMAIN-SUFFIX,test.steampowered.com,DIRECT
DOMAIN-SUFFIX,tplinkwifi.net,DIRECT
DOMAIN-SUFFIX,tplogin.cn,DIRECT
DOMAIN-SUFFIX,ts.net,DIRECT
DOMAIN-SUFFIX,wifi.cmcc,DIRECT
DOMAIN-SUFFIX,zte.home,DIRECT
IP-CIDR,0.0.0.0/8,no-resolve,DIRECT
IP-CIDR,10.0.0.0/8,no-resolve,DIRECT
IP-CIDR,100.64.0.0/10,no-resolve,DIRECT
IP-CIDR,127.0.0.0/8,no-resolve,DIRECT
IP-CIDR,169.254.0.0/16,no-resolve,DIRECT
IP-CIDR,172.16.0.0/12,no-resolve,DIRECT
IP-CIDR,192.0.0.0/24,no-resolve,DIRECT
IP-CIDR,192.0.2.0/24,no-resolve,DIRECT
IP-CIDR,192.168.0.0/16,no-resolve,DIRECT
IP-CIDR,192.88.99.0/24,no-resolve,DIRECT
IP-CIDR,198.18.0.0/15,no-resolve,DIRECT
IP-CIDR,198.51.100.0/24,no-resolve,DIRECT
IP-CIDR,203.0.113.0/24,no-resolve,DIRECT
IP-CIDR,224.0.0.0/3,no-resolve,DIRECT
IP-CIDR,::/127,no-resolve,DIRECT
IP-CIDR,fc00::/7,no-resolve,DIRECT
IP-CIDR,fe80::/10,no-resolve,DIRECT
IP-CIDR,ff00::/8,no-resolve,DIRECT

# PROXY Rules
# NAME: OpenAI,V3 Static Residential
# AUTHOR: blackmatrix7,V3 Static Residential
# REPO: https://github.com/blackmatrix7/ios_rule_script,V3 Static Residential
# UPDATED: 2025-06-06 09:20:00,V3 Static Residential
# DOMAIN: 7,V3 Static Residential
# DOMAIN-KEYWORD: 1,V3 Static Residential
# DOMAIN-SUFFIX: 24,V3 Static Residential
# IP-ASN: 1,V3 Static Residential
# IP-CIDR: 2,V3 Static Residential
# TOTAL: 35,V3 Static Residential
DOMAIN,browser-intake-datadoghq.com,V3 Static Residential
DOMAIN,chat.openai.com.cdn.cloudflare.net,V3 Static Residential
DOMAIN,openai-api.arkoselabs.com,V3 Static Residential
DOMAIN,openaicom-api-bdcpf8c6d2e9atf6.z01.azurefd.net,V3 Static Residential
DOMAIN,openaicomproductionae4b.blob.core.windows.net,V3 Static Residential
DOMAIN,production-openaicom-storage.azureedge.net,V3 Static Residential
DOMAIN,static.cloudflareinsights.com,V3 Static Residential
DOMAIN-SUFFIX,ai.com,V3 Static Residential
DOMAIN-SUFFIX,algolia.net,V3 Static Residential
DOMAIN-SUFFIX,api.statsig.com,V3 Static Residential
DOMAIN-SUFFIX,auth0.com,V3 Static Residential
DOMAIN-SUFFIX,chatgpt.com,V3 Static Residential
DOMAIN-SUFFIX,chatgpt.livekit.cloud,V3 Static Residential
DOMAIN-SUFFIX,client-api.arkoselabs.com,V3 Static Residential
DOMAIN-SUFFIX,events.statsigapi.net,V3 Static Residential
DOMAIN-SUFFIX,featuregates.org,V3 Static Residential
DOMAIN-SUFFIX,host.livekit.cloud,V3 Static Residential
DOMAIN-SUFFIX,identrust.com,V3 Static Residential
DOMAIN-SUFFIX,intercom.io,V3 Static Residential
DOMAIN-SUFFIX,intercomcdn.com,V3 Static Residential
DOMAIN-SUFFIX,launchdarkly.com,V3 Static Residential
DOMAIN-SUFFIX,oaistatic.com,V3 Static Residential
DOMAIN-SUFFIX,oaiusercontent.com,V3 Static Residential
DOMAIN-SUFFIX,observeit.net,V3 Static Residential
DOMAIN-SUFFIX,openai.com,V3 Static Residential
DOMAIN-SUFFIX,openaiapi-site.azureedge.net,V3 Static Residential
DOMAIN-SUFFIX,openaicom.imgix.net,V3 Static Residential
DOMAIN-SUFFIX,segment.io,V3 Static Residential
DOMAIN-SUFFIX,sentry.io,V3 Static Residential
DOMAIN-SUFFIX,stripe.com,V3 Static Residential
DOMAIN-SUFFIX,turn.livekit.cloud,V3 Static Residential
DOMAIN-KEYWORD,openai,V3 Static Residential
IP-CIDR,24.199.123.28/32,no-resolve,V3 Static Residential
IP-CIDR,64.23.132.171/32,no-resolve,V3 Static Residential
IP-ASN,20473,no-resolve,V3 Static Residential

# REJECT Rules (from Johnshall)

# === GEOIP 与兜底规则 ===
GEOIP,CN,DIRECT
FINAL,proxy

https://www.grammarly.com/ai/ai-writing-tools/paragraph-rewriter
^https?://(www.)?(g|google)\.cn https://www.google.com 302

[MITM]
hostname = *.google.cn,*.googlevideo.com
